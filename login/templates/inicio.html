{% extends "base.html" %}
{% block titulo %}Inicio{% endblock %}
{% block contenido %}
<div class="container mt-4">
    <h1 class="mb-4">Historial de Tickets</h1>
    <div class="informacion-usuario mb-4">
        <div class="d-flex justify-content-between align-items-center">
            <div>
                <span>Usuario: <strong>{{ user.username }}</strong></span>
                <span>Rol: <strong>{{ user_profile.rol.nombre }}</strong></span>
            </div>
            <div class="contenedor-buscar">
                <form method="get" action="{% url 'inicio' %}">
                    <input type="text" name="buscar" placeholder="Buscar ticket..." class="form-control d-inline-block w-auto">
                    <button type="submit" class="btn btn-secondary">Buscar</button>
                </form>
            </div>
        </div>
        <ul class="nav nav-pills mt-3">
            {% if user_profile.rol_id == 1 or user_profile.rol_id == 3 %}
                <li class="nav-item">
                    <a class="nav-link" href="{% url 'categoria' %}">Crear Categoría</a>
                </li>
            {% endif %}
            <li class="nav-item">
                <a class="nav-link" href="{% url 'tikcet' %}">Crear Ticket</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="{% url 'todo' %}">Tickets Resueltos</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="{% url 'all' %}">Todos los Tickets</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="{% url 'inicio' %}">Tickets en Progreso</a>
            </li>
        </ul>
    </div>
    <!-- Tabla que muestra los tickets -->
    <section class="tabla-tickets">
        <table class="table table-striped">
            <thead>
                <tr>
                    <th>Encargado</th>
                    <th>ID Ticket</th>
                    <th>Problema</th>
                    <th>Descripción</th>
                    <th>Estado</th>
                    <th>Fecha de Creación</th>
                    <th>Fecha de Solución</th>
                </tr>
            </thead>
            <tbody>
                {% for ticket in tickets %}
                    <tr>
                        <td>{{ ticket.encargado }}</td>
                        <td>{{ ticket.id_ticket }}</td>
                        <td>{{ ticket.problema }}</td>
                        <td>{{ ticket.descripcion }}</td>
                        <td>{{ ticket.estado }}</td>
                        <td>{{ ticket.fecha_creacion }}</td>
                        <td>{{ ticket.fecha_solucion }}</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </section>
</div>
{% endblock %}